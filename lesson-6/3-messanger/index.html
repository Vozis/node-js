<html>
  <head>
    <title>Mfc logs</title>
    <script
      src="https://cdn.socket.io/4.5.4/socket.io.min.js"
      integrity="sha384-/KNQL8Nu5gCHLqwqfQjA689Hhoqgi2S84SNUxC3roTe4EhJ9AfLkp8QiQcU8AMzI"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <h1>Messanger</h1>
    <input type="text" id="input" autofocus />
    <button type="submit" id="send">Send</button>
    <div id="messages"></div>
  </body>
  <script type="text/javascript">
    const socket = io("localhost:3001");
    const input = document.getElementById("input");
    const btn = document.getElementById("send");

    const addMessage = (msg) => {
      const msgSpan = (document.createElement("span").innerHTML = msg);
      document.getElementById("messages").append(msgSpan);
      document.getElementById("messages").append(document.createElement("br"));
    };

    socket.on("connect", () => {
      console.log(socket.id);
      console.log("Connection with localhost:3001 created");
    });

    socket.on("server-msg", ({ msg }) => {
      addMessage(msg);
    });

    btn.onclick = function () {
      socket.emit("client-msg", {
        msg: input.value,
      });
      input.value = "";
    };
  </script>
</html>
